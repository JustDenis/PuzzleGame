{"version":3,"sources":["webpack:///./js/puzzleGame.js","webpack:///./js/getRandomImg.js","webpack:///./js/gameMenu.js"],"names":["PuzzleGame","col","row","container","imgUrl","this","document","querySelector","boxesArray","containerWidth","clientWidth","containerHeight","clientHeight","createBoxes","quantityOfBoxes","boxWidth","boxHeight","i","dataRow","Math","floor","dataCol","box","push","shuffleImage","array","sort","random","insertAdjacentHTML","join","startGame","image","refs","sectionDifficult","sectionPuzzle","selectForm","selectButtons","confirmButton","exampleImage","dragSrcEl","openPuzzle","classList","add","remove","src","initialDrag","forEach","call","querySelectorAll","item","addEventListener","handleDragStart","e","handleDragEnter","handleDragOver","handleDragLeave","handleDrop","handleDragEnd","target","style","opacity","dataTransfer","effectAllowed","setData","outerHTML","preventDefault","dropEffect","stopPropagation","getData","Array","from","removeEventListener","event","type","dataset","selected","error","title","nodeName","difficult"],"mappings":"qMAAqBA,E,WACnB,WAAYC,EAAKC,EAAKC,EAAWC,GAC/BC,KAAKJ,IAAMA,EACXI,KAAKH,IAAMA,EACXG,KAAKF,UAAYG,SAASC,cAAcJ,GACxCE,KAAKD,OAASA,EACdC,KAAKG,WAAa,GAClBH,KAAKI,eAAiBJ,KAAKF,UAAUO,YACrCL,KAAKM,gBAAkBN,KAAKF,UAAUS,a,2BAGxCC,YAAA,WAKE,IAJA,IAAMC,EAAkBT,KAAKJ,IAAMI,KAAKH,IAClCa,EAAWV,KAAKI,eAAiBJ,KAAKJ,IACtCe,EAAYX,KAAKM,gBAAkBN,KAAKH,IAErCe,EAAI,EAAGA,EAAIH,EAAiBG,GAAK,EAAG,CACzC,IAAMC,GAAW,GAAKD,EAAI,GAAKE,KAAKC,MAAMH,EAAIZ,KAAKJ,KAAOI,KAAKJ,IACzDoB,EAAUF,KAAKC,MAAOH,EAAIZ,KAAKJ,KACjCqB,EAAM,4DAA4DP,EAA/D,eAAsFC,EAAtF,6BACPX,KAAKD,OADE,0BAEiBW,GAAYG,EAF7B,MAE0CF,GAAaK,EAFvD,aAGThB,KAAKG,WAAWe,KAAKD,GAEvBjB,KAAKmB,aAAanB,KAAKG,a,EAGzBgB,aAAA,SAAaC,GACXA,EAAMC,MAAK,kBAAO,GAAKP,KAAKQ,YAC5BtB,KAAKF,UAAUyB,mBAAmB,YAAaH,EAAMI,KAAK,O,EAG5DC,UAAA,WACEzB,KAAKQ,e,KCjBMkB,EAhBA,CACb,2EACA,2EACA,4EACA,uEACA,0EACA,4EACA,4EACA,2EACA,4EACA,8EAGkBZ,KAAKC,MAAM,EAAAD,KAAKQ,UAAsB,G,YCPpDK,G,oBAAO,CACXC,iBAAkB3B,SAASC,cAAc,iBACzC2B,cAAe5B,SAASC,cAAc,sBACtC4B,WAAY7B,SAASC,cAAc,mBACnC6B,cAAe9B,SAASC,cAAc,sBACtC8B,cAAe/B,SAASC,cAAc,mBACtC+B,aAAchC,SAASC,cAAc,qBAEnCgC,EAAY,KAkChB,SAASC,IACPR,EAAKC,iBAAiBQ,UAAUC,IAAI,QACpCV,EAAKE,cAAcO,UAAUE,OAAO,QACpCX,EAAKM,aAAaM,IAAMb,EAI1B,SAASc,IACP,GAAGC,QAAQC,KAAKzC,SAAS0C,iBAAiB,iBAAiB,SAAUC,GACnEA,EAAKC,iBAAiB,YAAaC,MAiBvC,SAASA,EAAgBC,GACvB,GAAGN,QAAQC,KAAKzC,SAAS0C,iBAAiB,iBAAiB,SAAUC,GACnEA,EAAKC,iBAAiB,YAAaG,GACnCJ,EAAKC,iBAAiB,WAAYI,GAClCL,EAAKC,iBAAiB,YAAaK,GACnCN,EAAKC,iBAAiB,OAAQM,GAC9BP,EAAKC,iBAAiB,UAAWO,MAEnCL,EAAEM,OAAOC,MAAMC,QAAU,GAEzBrB,EAAYa,EAAEM,OACdN,EAAES,aAAaC,cAAgB,OAC/BV,EAAES,aAAaE,QAAQ,YAAaX,EAAEM,OAAOM,WAG/C,SAASV,EAAeF,GAClBA,EAAEa,gBACJb,EAAEa,iBAGJb,EAAES,aAAaK,WAAa,OAG9B,SAASb,EAAgBD,GACvBA,EAAEM,OAAOjB,UAAUC,IAAI,QAGzB,SAASa,EAAgBH,GACvBA,EAAEM,OAAOjB,UAAUE,OAAO,QAG5B,SAASa,EAAWJ,GACdA,EAAEe,iBACJf,EAAEe,kBAGA5B,IAAca,EAAEM,SAClBnB,EAAUyB,UAAYZ,EAAEM,OAAOM,UAC/BZ,EAAEM,OAAOM,UAAYZ,EAAES,aAAaO,QAAQ,cAIhD,SAASX,IACPY,MAAMC,KAAKhE,SAAS0C,iBAAiB,iBAAiBF,SAAQ,SAAAG,GAC5DA,EAAKC,iBAAiB,YAAaC,GAAiB,GACpDF,EAAKU,MAAMC,QAAU,EACrBX,EAAKR,UAAUE,OAAO,WAExB0B,MAAMC,KAAKhE,SAAS0C,iBAAiB,iBAAiBF,SAAQ,SAAAG,GAC5DA,EAAKsB,oBAAoB,YAAalB,GACtCJ,EAAKsB,oBAAoB,WAAYjB,GACrCL,EAAKsB,oBAAoB,YAAahB,GACtCN,EAAKsB,oBAAoB,OAAQf,GACjCP,EAAKsB,oBAAoB,UAAWd,MA/GxCzB,EAAKG,WAAWe,iBAAiB,SAGjC,SAA0BsB,GACxB,GAA0B,WAAtBA,EAAMd,OAAOe,KACf,OAGF,GAAsC,KAAlCD,EAAMd,OAAOgB,QAAQC,SAIvB,YAHAC,gBAAM,CACJC,MAAO,2BAK2B,SAAlCL,EAAMd,OAAOgB,QAAQC,WACvBnC,IACA,IAAIxC,EAAW,EAAG,EAAG,OAAQ+B,GAAOD,YACpCe,KAEoC,WAAlC2B,EAAMd,OAAOgB,QAAQC,WACvBnC,IACA,IAAIxC,EAAW,EAAG,EAAG,OAAQ+B,GAAOD,YACpCe,KAEoC,SAAlC2B,EAAMd,OAAOgB,QAAQC,WACvBnC,IACA,IAAIxC,EAAW,EAAG,EAAG,OAAQ+B,GAAOD,YACpCe,QA3BJb,EAAKI,cAAcc,iBAAiB,SA4CpC,SAA+BsB,GAC7B,GAA8B,WAA1BA,EAAMd,OAAOoB,SACf,OAGF,GAAIxE,SAASC,cAAc,aAAc,CAChBD,SAASC,cAAc,aAC/BkC,UAAUE,OAAO,YAElC6B,EAAMd,OAAOjB,UAAUC,IAAI,YAC3BV,EAAKK,cAAcqC,QAAQC,SAAWH,EAAMd,OAAOgB,QAAQK,e","file":"main.d7f4300679262420003a.js","sourcesContent":["export default class PuzzleGame {\r\n  constructor(col, row, container, imgUrl) {\r\n    this.col = col;\r\n    this.row = row;\r\n    this.container = document.querySelector(container);\r\n    this.imgUrl = imgUrl;\r\n    this.boxesArray = [];\r\n    this.containerWidth = this.container.clientWidth;\r\n    this.containerHeight = this.container.clientHeight;\r\n  }\r\n\r\n  createBoxes() {\r\n    const quantityOfBoxes = this.col * this.row;\r\n    const boxWidth = this.containerWidth / this.col;\r\n    const boxHeight = this.containerHeight / this.row;\r\n\r\n    for (let i = 0; i < quantityOfBoxes; i += 1) {\r\n        const dataRow = -1 + (i + 1) - Math.floor(i / this.col) * this.col;\r\n        const dataCol = Math.floor( i / this.col);\r\n      const box = `<div class=\"puzzle-part\" draggable=\"true\"  style=\"width: ${boxWidth}px; height: ${boxHeight}px; background-image: url(${\r\n        this.imgUrl\r\n      }); background-position:${boxWidth * -dataRow}px ${boxHeight * -dataCol}px\"></div>`;\r\n      this.boxesArray.push(box);\r\n    }\r\n    this.shuffleImage(this.boxesArray);\r\n  }\r\n\r\n  shuffleImage(array){\r\n    array.sort(() => -.5 + Math.random());\r\n    this.container.insertAdjacentHTML('beforeend', array.join(' '));\r\n  }\r\n\r\n  startGame() {\r\n    this.createBoxes();\r\n  }\r\n}\r\n\r\n\r\n\r\n","const images = [\r\n  'https://s1.eda.ru/StaticContent/Photos/140812180013/140820212258/p_O.jpg',\r\n  'https://cdn.pixabay.com/photo/2019/05/14/16/43/hokkaido-4202825_1280.jpg',\r\n  'https://cdn.pixabay.com/photo/2019/05/14/22/05/container-4203677_1280.jpg',\r\n  'https://cdn.pixabay.com/photo/2019/05/16/09/47/view-4206785_1280.jpg',\r\n  'https://cdn.pixabay.com/photo/2016/11/18/16/19/flowers-1835619_1280.jpg',\r\n  'https://cdn.pixabay.com/photo/2018/09/13/10/36/mountains-3674334_1280.jpg',\r\n  'https://cdn.pixabay.com/photo/2019/05/16/23/04/landscape-4208571_1280.jpg',\r\n  'https://cdn.pixabay.com/photo/2019/05/17/09/27/the-alps-4209272_1280.jpg',\r\n  'https://cdn.pixabay.com/photo/2019/05/16/21/10/landscape-4208255_1280.jpg',\r\n  'https://cdn.pixabay.com/photo/2019/05/17/04/35/lighthouse-4208843_1280.jpg',\r\n]\r\n\r\nconst imageNumber = Math.floor(Math.random() * (9 - 0)) + 0;\r\nconst image = images[imageNumber];\r\n\r\nexport default image","import PuzzleGame from './puzzleGame';\r\nimport image from './getRandomImg';\r\nimport { error } from '@pnotify/core/dist/PNotify.js';\r\nimport '@pnotify/core/dist/PNotify.css';\r\nimport '@pnotify/core/dist/BrightTheme.css';\r\n\r\nconst refs = {\r\n  sectionDifficult: document.querySelector('.js-difficult'),\r\n  sectionPuzzle: document.querySelector('.js-puzzle-section'),\r\n  selectForm: document.querySelector('.js-form-select'),\r\n  selectButtons: document.querySelector('.js-select-buttons'),\r\n  confirmButton: document.querySelector('.js-confirm-btn'),\r\n  exampleImage: document.querySelector('.js-example-img'),\r\n};\r\nlet dragSrcEl = null;\r\n\r\nrefs.selectForm.addEventListener('click', handleFormSubmit);\r\nrefs.selectButtons.addEventListener('click', handleSelectDifficult);\r\n\r\nfunction handleFormSubmit(event) {\r\n  if (event.target.type !== 'submit') {\r\n    return;\r\n  }\r\n\r\n  if (event.target.dataset.selected === '') {\r\n    error({\r\n      title: 'Select difficult mode!',\r\n    });\r\n    return;\r\n  }\r\n\r\n  if (event.target.dataset.selected === 'easy') {\r\n    openPuzzle();\r\n    new PuzzleGame(3, 3, '#box', image).startGame();\r\n    initialDrag();\r\n  }\r\n  if (event.target.dataset.selected === 'medium') {\r\n    openPuzzle();\r\n    new PuzzleGame(4, 4, '#box', image).startGame();\r\n    initialDrag();\r\n  }\r\n  if (event.target.dataset.selected === 'hard') {\r\n    openPuzzle();\r\n    new PuzzleGame(5, 5, '#box', image).startGame();\r\n    initialDrag();\r\n  }\r\n}\r\n\r\nfunction openPuzzle() {\r\n  refs.sectionDifficult.classList.add('none');\r\n  refs.sectionPuzzle.classList.remove('none');\r\n  refs.exampleImage.src = image;\r\n}\r\n\r\n// drag & drop functions\r\nfunction initialDrag() {\r\n  [].forEach.call(document.querySelectorAll('.puzzle-part'), function (item) {\r\n    item.addEventListener('dragstart', handleDragStart);\r\n  });\r\n}\r\n\r\nfunction handleSelectDifficult(event) {\r\n  if (event.target.nodeName !== 'BUTTON') {\r\n    return;\r\n  }\r\n\r\n  if (document.querySelector('.selected')) {\r\n    const selectedButton = document.querySelector('.selected');\r\n    selectedButton.classList.remove('selected');\r\n  }\r\n  event.target.classList.add('selected');\r\n  refs.confirmButton.dataset.selected = event.target.dataset.difficult;\r\n}\r\n\r\nfunction handleDragStart(e) {\r\n  [].forEach.call(document.querySelectorAll('.puzzle-part'), function (item) {\r\n    item.addEventListener('dragenter', handleDragEnter);\r\n    item.addEventListener('dragover', handleDragOver);\r\n    item.addEventListener('dragleave', handleDragLeave);\r\n    item.addEventListener('drop', handleDrop);\r\n    item.addEventListener('dragend', handleDragEnd);\r\n  });\r\n  e.target.style.opacity = 0.4;\r\n\r\n  dragSrcEl = e.target;\r\n  e.dataTransfer.effectAllowed = 'move';\r\n  e.dataTransfer.setData('text/html', e.target.outerHTML);\r\n}\r\n\r\nfunction handleDragOver(e) {\r\n  if (e.preventDefault) {\r\n    e.preventDefault();\r\n  }\r\n\r\n  e.dataTransfer.dropEffect = 'move';\r\n}\r\n\r\nfunction handleDragEnter(e) {\r\n  e.target.classList.add('over');\r\n}\r\n\r\nfunction handleDragLeave(e) {\r\n  e.target.classList.remove('over');\r\n}\r\n\r\nfunction handleDrop(e) {\r\n  if (e.stopPropagation) {\r\n    e.stopPropagation();\r\n  }\r\n\r\n  if (dragSrcEl !== e.target) {\r\n    dragSrcEl.outerHTML = e.target.outerHTML;\r\n    e.target.outerHTML = e.dataTransfer.getData('text/html');\r\n  }\r\n}\r\n\r\nfunction handleDragEnd() {\r\n  Array.from(document.querySelectorAll('.puzzle-part')).forEach(item => {\r\n    item.addEventListener('dragstart', handleDragStart, false);\r\n    item.style.opacity = 1;\r\n    item.classList.remove('over');\r\n  });\r\n  Array.from(document.querySelectorAll('.puzzle-part')).forEach(item => {\r\n    item.removeEventListener('dragenter', handleDragEnter);\r\n    item.removeEventListener('dragover', handleDragOver);\r\n    item.removeEventListener('dragleave', handleDragLeave);\r\n    item.removeEventListener('drop', handleDrop);\r\n    item.removeEventListener('dragend', handleDragEnd);\r\n  });\r\n}\r\n"],"sourceRoot":""}